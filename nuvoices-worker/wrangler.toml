name = "nuvoices-worker"
main = "dist/worker.js"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]

# D1 Database binding
[[d1_databases]]
binding = "DB"
database_name = "nuvoices-preview-data"
database_id = "f4c7c2ff-7802-40b4-8bb4-941539c534c9"

# Cron Triggers - Sync from Google Sheets every 10 minutes
[triggers]
crons = ["*/10 * * * *"]

# Environment variables (use .dev.vars for local development)
# TIMESTAMP_URL, CSV_URL should be set in Cloudflare dashboard for production
# Example .dev.vars file:
# TIMESTAMP_URL=https://script.google.com/macros/s/YOUR_SCRIPT_ID/exec?action=timestamp
# CSV_URL=https://script.google.com/macros/s/YOUR_SCRIPT_ID/exec?action=csv

[env.production]
[[env.production.d1_databases]]
binding = "DB"
database_name = "nuvoices-data"
database_id = "43b417cc-40a3-4f1b-a886-e4ffaede2b15"  # Replace with production database ID

[env.production.triggers]
crons = ["*/10 * * * *"]
